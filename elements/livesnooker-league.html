<link rel="import" href="../vendors/polymer/polymer.html">
<link rel="import" href="live-snooker-api.html">
<link rel="import" href="js/league.html">

<polymer-element name="livesnooker-league" attributes="league">
  <template id="template">
    <live-snooker-api id="api"></live-snooker-api>
    <template if="{{ league }}">
      This shows information about the league {{leagueId}}
      Name: {{league.attributes.name}}
    </template>
    <template if="{{ error }}">
      {{ error }}
    </template>
  </template>
  <script>
    Polymer({
      domReady: function() {
        if (!this.league) {
          var league = new League({id: this.leagueId});
          league.setApiClient(this.$.api);
          var _this = this;
          league.fetch({
            success: function() {
              _this.league = league;
            },
            error: function(model, response) {
              _this.error = response.status
            }
          });
        }
      }
    });
  </script>
</polymer-element>
