<link rel="import" href="../vendors/polymer/polymer.html">
<link rel="import" href="model-attribute.html">
<link rel="import" href="livesnooker-player-stats.html">

<dom-module id="livesnooker-player-link">
  <style>
  </style>
  <template>
    <a href="#" on-click="_onPlayerClick">
      <model-attribute model="[[player]]" attribute="name"></model-attribute> 
    </a>
    <span id="stats"></span>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'livesnooker-player-link',
    properties: {
      player: Object,
      host: String
    },
    _onPlayerClick: function(event) {
      event.preventDefault();
      var el = this.$$('#stats');
      el.innerHTML = '';
      var statsEl = this.createStatsElement();
      el.appendChild(statsEl);
      statsEl.open();
    },
    createStatsElement: function() {
      return new LivesnookerPlayerStatsModal(this.player.id, this.player.get('LeagueId'), this.host);
    }
  });
</script>
