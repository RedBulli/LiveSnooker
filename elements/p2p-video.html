<script src="../vendors/rtcmulticonnection/RTCMultiConnection.min.js"></script>

<polymer-element name="p2p-video" attributes="input">
  <template>
    <style>
      :host {
        display: block;
      }
      #cam {
        background-color: green;
      }
    </style>
    <div id="cam" width="640" height="480"></div>
  </template>

  <script>
    Polymer({
      ready: function() {
        var el = this.$.cam;
        var connection = new RTCMultiConnection();

        connection.session = {
          audio: true,
          video: true,
          oneway: true
        };

        connection.onstream = function(e) {
          el.insertBefore(e.mediaElement, el.firstChild);
        };

        connection.connect();
        if (this.input) {
          connection.open();
        }
      }
    });
  </script>
</polymer-element>
