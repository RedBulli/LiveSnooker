<link rel="import" href="../vendors/polymer/polymer.html">

<polymer-element name="break-points" attributes="shotGroup">
  <template>
    <template if="{{shotGroupViewModel.pots}}">
      {{shotGroupViewModel.player.attributes.name}}: {{shotGroupViewModel.points.points}}
    </template>
    <template if="{{!shotGroupViewModel.pots}}">
      No pots for {{shotGroupViewModel.shots}} shots
    </template>
  </template>
  <script>
    Polymer({
      updateView: function() {
        this.shotGroupViewModel = this.shotGroup.totals();
      },
      ready: function() {
        this.shotGroup.listenTo(this.shotGroup.get('shots'), 'add remove change update', this.updateView.bind(this)); 
        this.updateView();
      }
    });
  </script>
</polymer-element>

<polymer-element name="break-history-view" attributes="breaks">
  <template>
    <ol>
      <template repeat="{{break, i in breakViewModels}}">
        <li>
          <break-points shotGroup="{{break}}"></break-points>
        </li>
      </template>
    </ol>
  </template>
  <script>
    Polymer({
      ready: function() {
        this.breakViewModels = this.breaks.models;
      }
    });
  </script>
</polymer-element>
